function replaceAll(e,a,r){return r.replace(new RegExp(e,"g"),a)}function check(){if(nroCuenta=$("#vcuenta").val(),vprocesar=$("#vprocesar"),vprocesar.attr("disabled",!0),"tarjeta"==$("#tipoCuenta").val()){var e,a="",r="";if("checked"==$("#chk_otros").attr("checked")?(e=$("#otros").val(),e=replaceAll("-","",e),a=replaceAll(" ","",e),vTipoTarjeta="M",r="0000000000000000"):"checked"==$("#chk_amex").attr("checked")&&(e=$("#amex").val(),e=replaceAll("-","",e),a=replaceAll(" ","",e),vTipoTarjeta="A",r="000000000000000"),isNaN(e)||""==a||a==r)return alert("Datos incorrectos. Por favor intentá nuevamente."),"M"==vTipoTarjeta?($("#otros").val("0000-0000-0000-0000"),vprocesar.disabled=!0,enfocarCuenta()):($("#amex").val("0000-000000-00000"),vprocesar.disabled=!0,enfocarCuenta()),!1;var t=e.substr(0,e.length-1),n=getDVTarjeta(t);if(n!=e.substr(e.length-1,1))return alert("Datos incorrectos. Por favor intentá nuevamente."),"M"==vTipoTarjeta?($("#otros").val("0000-0000-0000-0000"),vprocesar.disabled=!0,enfocarCuenta()):($("#amex").val("0000-000000-00000"),vprocesar.disabled=!0,enfocarCuenta()),!1}else if(isNaN(nroCuenta)||""==nroCuenta)return alert("Datos incorrectos. Por favor intentá nuevamente."),borrarCuenta(),enfocarCuenta(),!1;return!0}function validKeys(e){var a="",r="0123456789";if(window.event)var t=window.event.keyCode;else if(e.which)var t=e.which;return 13==t?!$("#vprocesar").attr("disabled"):8==t?!0:(a=String.fromCharCode(t),-1==r.indexOf(a)?!1:void 0)}function habilitarSgte(){var e=!0,a=$("#vprocesar");"tarjeta"==$("#tipoCuenta").val()?("checked"==$("#chk_otros").attr("checked")&&0==$("#otros").val().length&&(e=!1),"checked"==$("#chk_amex").attr("checked")&&0==$("#amex").val().length&&(e=!1)):0==$("#vcuenta").val().length&&(e=!1),e?a.removeAttr("disabled"):a.attr("disabled","disabled")}function enfocarCuenta(){$("#cedula").val(""),$("#ruc").val(""),$("#cuenta").val(""),$("#cuenta_empresa").val(""),$("#otros").val(""),$("#vcuenta").val(""),"panelPersona"==$("#segmento").val()?$("#cedula").focus():$("#ruc").focus()}function borrarCuenta(){$("#cuenta_empresa").val(""),$("#cuenta").val(""),$("#vcuenta").val("")};
function validarDigitoVerificadorCuenta(r){var a,t,o,u=10,n=0,e=0,f=9,m=new Array(1,9,7,3,1,9,7,3),s=new Array(8),d=new Array(8);if(a=f-r.length,0==a)for(i=0;i<r.length;i++)s[i]=r.charAt(i);else{for(j=0;j<a;j++)s[j]="0";for(k=a;k<f;k++)s[k]=r.charAt(n),n++}for(i=0;i<f-1;i++)d[i]=mod(s[i]*m[i],u);for(i=0;i<f-1;i=i+1+1)e+=d[i]+d[i+1];return modSumatoria=mod(e,u),o=mod(u-modSumatoria,u),t=s[f-1],o==t}function getDVTarjeta(r){k=2,suma=0;var a=0;for(i=r.length-1;i>=0;i--){for(aux=r.substr(i,1)*k,aux_str=""+aux,j=0;j<aux_str.length;j++)suma+=1*aux_str.substr(j,1);2==k?k=1:k=2}return aux=mod(suma,10),a=0==aux?0:10-aux}function mod(r,i){var a,t;return a=Math.floor(r/i),t=r-i*a};